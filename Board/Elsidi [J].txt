                                   Elsidi [J]



RATINGS

  o Input voltage ........: 5 V
  o Input current (max)...: 500 mA


BOARD

  o Board size ...........: 42.50 x 72.00 mm (4.74 sqin)


PARTS                              

  o C: 10nF 50V, X7R (0805)
    - C1                                FT232

  o C: 100nF 50V, X7R (0805)
    - C2 C4                             FT232
    - C5 C6 C7                          Decoupling

  o C: 10uF 6V3, tantalum (0805)
    - C3                                FT232

  o C: 1uF 35V, tantalum (0805)
    - C8                                DC-to-DC input

  o C: 470uF 16V, aluminum (r10x12)
    - C12                               DC-to-DC output

  o C: 470pF 50V, X7R (0805)
    - C9                                DC-to-DC

  o C: 1000uF /25V                                                              real value is 700uF
    - C13                               Low-pass filter                         t = RC;  100 * (1 / Freq) ? t   /  E7 = 100 * (1 / Freq) / R5        (*1000000 for uF)

  o D: ES1D-E3 (SMA)
    - D1                                protects 7805 from LM317 and USB
    - D2                                protects USB 7805
    - D3                                reverse polarity protection
    - D4                                DC-to-DC

  o FB:  Ferrite bead 32R, .06R 600mA (0805)
    - FB1                               FT232RL

  o J: USB B, horizontal
    - J1                                USB

  o J: MSTBA 2w, 5.08 horizontal
    - J2                                24V input

  o J: MSTBA 3w, 5.08 horizontal
    - J3                                RS-232 input
    
  o L: 220uH, .21R 1.4A (r13x15)
    - L1                                DC-to-DC converter
    
  o LED: Orange 150mcd, 2.2V 20mA (0805)
    - LED1                              RX/TX
    - LED2                              Power

  o Q: IRLML2060, 60V, 1.2A (SOT23)
    - Q1                                Turns on backlight

  o R: 10 5%, 2.5W (a)
    - R5                                LED current limiter

  o R: 100, 1W (2512)
    - R3                                Common ground resistors

  o R: 680, 0.125W (0805)
    - R1 R2                             LED

  o R: 10K trim, PT-10 LV10
    - R6                                Contrast for LCD1
    - R7                                Contrast for LCD2

  o R: .33 1%, 0.125W (0805)
    - R9                                DC-to-DC

  o R: 560 1%, 0.125W (0805)
    - R12                               MOSFET gate (5V, 9mA)

  o R: 1K2 1%, 0.125W (0805)
    - R10                               DC-to-DC

  o R: 3K9 1%, 0.125W (0805)
    - R11                               DC-to-DC

  o R: 100K 1%, 0.125W (0805)
    - R13                               MOSFET bleed-off resistor

  o U: FT232RL, (SSOP-28)
    - U1

  o U: PIC16F1826, (SSOP-18)
    - U2

  o U: MAX202CPWG4, (TSSOP-16)
    - U3                                RS-232

  o U: MC34063ADG4, (SOIC-8)
    - U4


CASE

   o  Side element 11.25 mm
      -  PhoenixContact 2970002 (UMK-SE 11,25)                            {RS 192-2709}
      -  PhoenixContact 2970442 (UMK-SE 11,25-1)                          {RS 192-2715}

   o  Base element 22.50 mm (1x)
      -  PhoenixContact 

   o  Foot element (DIN rail)
      -  PhoenixContact 2970031 (UMK-FE)                                  {RS 192-2765}


EXPLANATIONS

  o This board supports RS-232 connection with separate power supply and USB
    connection. However these are NOT SUPPORTED AT THE SAME TIME.

  o Backlight intensity is controled via voltage regulator. Value is:   
      Vout = 1.25V * (1 + R8 / R4) + Iadj * R8

  o This board features two display connectors. Each display has separate
    contrast control but they do share backlight connection so only displays
    with similar backlight requirements can be used. 
     

LCD INTERFACE

   Elsidi uses total of 11 control lines for sending text and
   instructions to LCD these lines are:
    
      RS       Selects registers.
      R/W      Selects read or write.
      E        Starts data read/write.
      DB0-DB3  Four low order bidirectional tristate data bus pins.
      DB4-DB7  Four high order bidirectional tristate data bus pins.

   All lines except for E are multiplexed between two supported LCD
   devices. E is controled separately for primary (E1) and secondary
   LCD display (E2). Only one display can be controlled at any time.
   
   Currently all 8 data lines are used for controlling LCD.


USART INTERFACE

    Hardware interface
    
       Three wires are used - RXD, TXD and GND. All data is sent in
       ASCII at 9600 baud, 1 stop bit and no parity.

   Modes of operation

      Text mode will write each character to LCD as it comes while
      holding RS high. Instruction mode will write each character to LCD
      while holding RS low (thus directly controlling LCD instructions).
      Text mode is always used unless specified otherwise by command
      characters.

   Command characters
    
      Command characters are in ASCII range 0x08-0x0F (8-15 decimal).
      This range was selected since only CGRAM characters are here and
      they can be selected within 0x00-0x07 range. Here is meaning of
      characters:

         0x08 BS   Reserved for future use.
         0x09 HT   Next line.
         0x0A LF   Execute.
         0x0B VT   Reserved for future use.
         0x0C FF   LCD instruction mode.
         0x0D CR   Return home.
         0x0E SO   Select secondary display.
         0x0F SI   Select primary display.

         Next line (HT)

            Moves LCD cursor to next line. It is included as helper
            method for controlling display from command line. Display is
            always considered as having four lines and stops will be at
            locations: 0x00 (first line), 0x40 (second line), 0x14
            (third line) and 0x54 (fourth line). After fourth line no
            movement will be made until line is resetted (via CR
            command).

         Execute (LF)
    
            Executes saved buffer. During execution no further input is
            received. When execution is done single LF will be sent to
            USART. After execution is done, LCD will be left in text
            mode and control will be given to primary display. 

         LCD instruction mode (FF)

            Causes character that follows to be interpreted as direct
            instruction for LCD. Next character will be sent to LCD with
            RS signal kept low. E.g. <FF> 0x02 will cause LCD to execute
            Return home command. After instruction character, all
            further characters are interpreted as usual.

         Return home (CR)

            Executes Return home LCD instruction. Result will be same as
            <FF> 0x02 was executed. It is included as helper method for
            controlling display from command line. This command will
            also reset tab position back to first line.

         Select secondary display (SO)
        
            Characters after this one will cause E2 line to be driven
            and thus secondary display will receive all input. This
            command must be used for each execution since primary
            display will be used by default.

         Select primary display (SI)
        
            All further characters are executed via driving E1 line and
            thus controling primary display. 

   LCD startup sequence
    
      Startup sequence is executed each time hardware is restarted. It
      is defined within device's EEPROM in same format as one used for
      USART communication and thus it must end with LF. After all is
      done, single LF will be sent to USART. As execution is finished
      LCD control will be set to primary display and text mode will be
      selected.

   Normal behaviour
    
      All characters received are saved in buffer with optional echoing
      to computer (echoing is currently not used but it must be
      expected). Once execute command is detected (LF), all characters
      are  sent as data toward LCD until one of command characters is
      encountered. After execution is done LF is sent back to
      computer, state returns to text mode and buffer is ready to
      receive new characters. If buffer size (208 bytes) is exceeded
      all further characters except LF are ignored.
